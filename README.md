# Тестовое задание на _Python_-программиста

В этом репозитории реализовано API приложения для планирования пикников, состоящие из сущностей:
 - Город
 - Пикник
 - Пользователь
 - Регистрация пользователя на пикник

## Задание
 Тестовое задание подразумевает изменение представленного здесь кода для достижения следующих задач:

### Минимальный уровень
  1. Запустить проект и ознакомиться с его документацией на странице `http://127.0.0.1:8000/redoc/`
     или `http://127.0.0.1:8000/docs/`
     и выполнить каждый из запросов &#9745;
  2. Изменить код проекта для получения дополнительных возможностей:
     - Добавить поиск городов аргументом `q` в запросе `/get-cities/` &#9745;
     - Добавить возможность фильтрации пользователей по возрасту(минимальный/максимальный) в запросе `users-list` &#9745;
     - Поправить ошибку в запросе `picnic-add` &#9745;
     - Добавить метод регистрации на пикник `picnic-register` &#9745;
  3. Высказать идеи рефакторинга файла `external_requests.py` &#9745;
     - Убрать все комментарии (код и так предельно ясен, а лишние комментарии лишь засоряют код);
     - Вместо построения `url` через конкатенацию строк сделать, как вариант, через метод `format`;
     - Избавиться от спагетти-кода: убрать разделение каждого действия (построение url, отправка запроса и т.д.) 
     в разных методах и сделать все в одном методе, к которому обращаемся через эндпоинты в main.py 
     (получилось довольно чисто + сэкономлено 100500 строк) 
     - В идеале обращаться к переменным с ключами (как `WEATHER_API_KEY`) через переменные окружения. 
     Для удобства не стал этого делать, но подметить стоит. 
     А еще я слышал, что для хранения различных токенов и ключей используют `Redis`.
  4. Описать возможные проблемы при масштабировании проекта &#9745;
     - Вышеупомянутые пункты (спагетти-код, ключи в коде)
     - Отсутствие тестов
     - SQLite рекомендуется сменить на другую бд, например на тот же postgreSQL или можно NoSQL, например монгу 
     (тут уж нужно отталкиваться от того, куда мы масштабируемся)


     
### Продвинутый уровень
  1. Привести к нормальному виду:
     - Методы обращения к эндпойнтам &#9745;
     - Названия эндпойнтов &#9745;
     - Архитектуру и пути обращения к эндпойнтам &#9745;
  2. Расписать все входные/выходные поля в документации (`/redoc/` или `/docs/`), описав их классами &#9745;
  3. Оптимизировать работу с базой данных в запросе `/all-picnics/`
  4. Сменить базу данных с SQLite на PostgreSQL &#9745;
  5. Отрефакторить файл `external_requests.py` &#9745;
  6. Написать тесты &#9744;


### Дополнительные задания
  - Сделать логирование в файл, который не будет очищаться после перезапуска в докере
  - Описать правильную архитектуру для проекта &#9745;
    - Простое добавление пользователя в базу заменить полноценной авторизацией с email, 
    привязкой телефона с подтверждением
    - Подтверждение на регистрацию пользователя создателем пикника (или что-то такое)
    - Скрипт, периодически обновляющий погоду всех городов в базе, т.к. как я понял, погода фиксируется только в 
    момент добавления города (celery в помощь)
    - Формирование уникального токена при добавлении пикника
    - Исходя из пунктов выше - изменение моделей базы данных (вместо user_id user_email и т.д.)
    - Возможно, как я уже и писал, плюсом будет использование нереляционной базы данных, т.к. проект не подразумевает 
    хранение огромных массивов данных (mongoDB хороший вариант)
    - Добавить PUT, PATCH и DELETE методы (например, если пользователь не может придти на пикник)


## Результат выполнения задания
Результат выполнения должен быть выложен в _общедоступном_ репозитории,
 история коммитов должна показывать выполненную работу
_Комментарии в коде тоже приветствуются_